# 同步/异步日志系统

在本项目中，采用**单例模式**创建日志系统，对服务器的运行状态、错误信息和访问数据进行记录。日志系统可根据实际情况设置**同步或异步**的写入方式。

在本项目中，异步日志系统是通过阻塞队列实现的，阻塞队列是基于**循环数组**和**生产者-消费者模型**设计而成。在异步日志系统中，会创建一个写线程，写线程从阻塞队列中取出内容，写入日志。

## 同步VS异步

在Web服务器中，日志系统包括**同步日志系统**和**异步日志系统**两种。

**同步日志系统**：在记录日志时，系统会等待将日志写入磁盘后才继续执行后续操作。这种方式可以确保日志记录的可靠性和一致性。

**异步日志系统**：在记录日志时，系统不会等待日志写入磁盘就继续执行后续操作。相反，它会将日志放入缓冲区或消息队列，由后台线程负责将日志异步写入磁盘。

综合来说，同步日志系统注重数据的可靠性，适用于对数据一致性要求较高的场景；而异步日志系统注重性能和吞吐量，适用于对延迟要求较低但可以容忍一定数据丢失的场景。

## 日志分级

本项目中将日志分为4个level，即：

- `DEBUG`: 主要用于调试和开发阶段。它提供了详细的调试相关的信息，通常用于输出变量值、函数调用跟踪等详细的程序执行信息。
- `INFO`:  主要用于输出一般的操作和状态信息，用于标识系统正常运行的重要事件。这些信息对于监控系统的运行状态以及收集关键统计数据非常有用，例如服务器启动信息、请求处理成功等。
- `WARN`: 用于记录警告信息，表示可能存在一些潜在的问题或异常情况，但并不会导致系统出现错误或中断。这些警告信息应该引起注意，但不需要立即采取行动。
- `ERROR`: 用于记录错误事件，表示系统遇到了无法继续正常执行的问题或异常情况。这些错误可能会导致系统功能受限、请求失败或导致系统崩溃。

